{"ast":null,"code":"import { supabase } from '../lib/supabase';\nexport class ApiService {\n  static async getAllApis() {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('apis').select(`\n          *,\n          categories (\n            id,\n            name,\n            slug\n          )\n        `).order('api_name');\n      if (error) {\n        console.error('Error fetching APIs from Supabase:', error);\n        throw error;\n      }\n\n      // Transform Supabase data to match our ApiEntry interface\n      return data.map(item => ({\n        API: item.api_name,\n        Description: item.description,\n        Auth: item.auth,\n        HTTPS: item.https,\n        Cors: item.cors,\n        Link: item.link,\n        Category: item.category_name || (item.categories ? item.categories.name : 'Unknown')\n      }));\n    } catch (error) {\n      console.error('Failed to fetch APIs:', error);\n      throw error;\n    }\n  }\n  static async searchApis(searchTerm, category) {\n    try {\n      let query = supabase.from('apis').select(`\n          *,\n          categories (\n            id,\n            name,\n            slug\n          )\n        `);\n\n      // Add search filter\n      if (searchTerm) {\n        query = query.or(`api_name.ilike.%${searchTerm}%,description.ilike.%${searchTerm}%,category_name.ilike.%${searchTerm}%`);\n      }\n\n      // Add category filter\n      if (category) {\n        query = query.eq('category_name', category);\n      }\n      query = query.order('api_name');\n      const {\n        data,\n        error\n      } = await query;\n      if (error) {\n        console.error('Error searching APIs:', error);\n        throw error;\n      }\n\n      // Transform Supabase data to match our ApiEntry interface\n      return data.map(item => ({\n        API: item.api_name,\n        Description: item.description,\n        Auth: item.auth,\n        HTTPS: item.https,\n        Cors: item.cors,\n        Link: item.link,\n        Category: item.category_name || (item.categories ? item.categories.name : 'Unknown')\n      }));\n    } catch (error) {\n      console.error('Failed to search APIs:', error);\n      throw error;\n    }\n  }\n  static async getCategories() {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('categories').select('name').order('name');\n      if (error) {\n        console.error('Error fetching categories:', error);\n        throw error;\n      }\n      return data.map(category => category.name);\n    } catch (error) {\n      console.error('Failed to fetch categories:', error);\n      throw error;\n    }\n  }\n  static async getCategoriesWithDetails() {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('categories').select('*').order('name');\n      if (error) {\n        console.error('Error fetching categories with details:', error);\n        throw error;\n      }\n      return data;\n    } catch (error) {\n      console.error('Failed to fetch categories with details:', error);\n      throw error;\n    }\n  }\n  static async addApi(api) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('apis').insert([api]).select(`\n          *,\n          categories (\n            id,\n            name,\n            slug\n          )\n        `).single();\n      if (error) {\n        console.error('Error adding API:', error);\n        throw error;\n      }\n      return {\n        API: data.api_name,\n        Description: data.description,\n        Auth: data.auth,\n        HTTPS: data.https,\n        Cors: data.cors,\n        Link: data.link,\n        Category: data.category_name || (data.categories ? data.categories.name : 'Unknown')\n      };\n    } catch (error) {\n      console.error('Failed to add API:', error);\n      throw error;\n    }\n  }\n  static async addCategory(category) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('categories').insert([category]).select().single();\n      if (error) {\n        console.error('Error adding category:', error);\n        throw error;\n      }\n      return data;\n    } catch (error) {\n      console.error('Failed to add category:', error);\n      throw error;\n    }\n  }\n}","map":{"version":3,"names":["supabase","ApiService","getAllApis","data","error","from","select","order","console","map","item","API","api_name","Description","description","Auth","auth","HTTPS","https","Cors","cors","Link","link","Category","category_name","categories","name","searchApis","searchTerm","category","query","or","eq","getCategories","getCategoriesWithDetails","addApi","api","insert","single","addCategory"],"sources":["/Users/caspernilsen/Dropbox/Projects/apifinder.net/src/services/apiService.ts"],"sourcesContent":["import { supabase } from '../lib/supabase';\nimport { ApiEntry } from '../types';\n\nexport interface SupabaseApiEntry {\n  id?: number;\n  api_name: string;\n  description: string;\n  auth: string;\n  https: boolean;\n  cors: string;\n  link: string;\n  category_id?: number;\n  category_name: string;\n  created_at?: string;\n  updated_at?: string;\n}\n\nexport interface SupabaseCategoryEntry {\n  id: number;\n  name: string;\n  slug: string;\n  created_at?: string;\n  updated_at?: string;\n}\n\nexport class ApiService {\n  static async getAllApis(): Promise<ApiEntry[]> {\n    try {\n      const { data, error } = await supabase\n        .from('apis')\n        .select(`\n          *,\n          categories (\n            id,\n            name,\n            slug\n          )\n        `)\n        .order('api_name');\n\n      if (error) {\n        console.error('Error fetching APIs from Supabase:', error);\n        throw error;\n      }\n\n      // Transform Supabase data to match our ApiEntry interface\n      return data.map((item: any) => ({\n        API: item.api_name,\n        Description: item.description,\n        Auth: item.auth,\n        HTTPS: item.https,\n        Cors: item.cors,\n        Link: item.link,\n        Category: item.category_name || (item.categories ? item.categories.name : 'Unknown')\n      }));\n    } catch (error) {\n      console.error('Failed to fetch APIs:', error);\n      throw error;\n    }\n  }\n\n  static async searchApis(searchTerm: string, category?: string): Promise<ApiEntry[]> {\n    try {\n      let query = supabase\n        .from('apis')\n        .select(`\n          *,\n          categories (\n            id,\n            name,\n            slug\n          )\n        `);\n\n      // Add search filter\n      if (searchTerm) {\n        query = query.or(`api_name.ilike.%${searchTerm}%,description.ilike.%${searchTerm}%,category_name.ilike.%${searchTerm}%`);\n      }\n\n      // Add category filter\n      if (category) {\n        query = query.eq('category_name', category);\n      }\n\n      query = query.order('api_name');\n\n      const { data, error } = await query;\n\n      if (error) {\n        console.error('Error searching APIs:', error);\n        throw error;\n      }\n\n      // Transform Supabase data to match our ApiEntry interface\n      return data.map((item: any) => ({\n        API: item.api_name,\n        Description: item.description,\n        Auth: item.auth,\n        HTTPS: item.https,\n        Cors: item.cors,\n        Link: item.link,\n        Category: item.category_name || (item.categories ? item.categories.name : 'Unknown')\n      }));\n    } catch (error) {\n      console.error('Failed to search APIs:', error);\n      throw error;\n    }\n  }\n\n  static async getCategories(): Promise<string[]> {\n    try {\n      const { data, error } = await supabase\n        .from('categories')\n        .select('name')\n        .order('name');\n\n      if (error) {\n        console.error('Error fetching categories:', error);\n        throw error;\n      }\n\n      return data.map(category => category.name);\n    } catch (error) {\n      console.error('Failed to fetch categories:', error);\n      throw error;\n    }\n  }\n\n  static async getCategoriesWithDetails(): Promise<SupabaseCategoryEntry[]> {\n    try {\n      const { data, error } = await supabase\n        .from('categories')\n        .select('*')\n        .order('name');\n\n      if (error) {\n        console.error('Error fetching categories with details:', error);\n        throw error;\n      }\n\n      return data;\n    } catch (error) {\n      console.error('Failed to fetch categories with details:', error);\n      throw error;\n    }\n  }\n\n  static async addApi(api: Omit<SupabaseApiEntry, 'id' | 'created_at' | 'updated_at'>): Promise<ApiEntry> {\n    try {\n      const { data, error } = await supabase\n        .from('apis')\n        .insert([api])\n        .select(`\n          *,\n          categories (\n            id,\n            name,\n            slug\n          )\n        `)\n        .single();\n\n      if (error) {\n        console.error('Error adding API:', error);\n        throw error;\n      }\n\n      return {\n        API: data.api_name,\n        Description: data.description,\n        Auth: data.auth,\n        HTTPS: data.https,\n        Cors: data.cors,\n        Link: data.link,\n        Category: data.category_name || (data.categories ? data.categories.name : 'Unknown')\n      };\n    } catch (error) {\n      console.error('Failed to add API:', error);\n      throw error;\n    }\n  }\n\n  static async addCategory(category: Omit<SupabaseCategoryEntry, 'id' | 'created_at' | 'updated_at'>): Promise<SupabaseCategoryEntry> {\n    try {\n      const { data, error } = await supabase\n        .from('categories')\n        .insert([category])\n        .select()\n        .single();\n\n      if (error) {\n        console.error('Error adding category:', error);\n        throw error;\n      }\n\n      return data;\n    } catch (error) {\n      console.error('Failed to add category:', error);\n      throw error;\n    }\n  }\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,iBAAiB;AAyB1C,OAAO,MAAMC,UAAU,CAAC;EACtB,aAAaC,UAAUA,CAAA,EAAwB;IAC7C,IAAI;MACF,MAAM;QAAEC,IAAI;QAAEC;MAAM,CAAC,GAAG,MAAMJ,QAAQ,CACnCK,IAAI,CAAC,MAAM,CAAC,CACZC,MAAM,CAAC;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,CAAC,CACDC,KAAK,CAAC,UAAU,CAAC;MAEpB,IAAIH,KAAK,EAAE;QACTI,OAAO,CAACJ,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;QAC1D,MAAMA,KAAK;MACb;;MAEA;MACA,OAAOD,IAAI,CAACM,GAAG,CAAEC,IAAS,KAAM;QAC9BC,GAAG,EAAED,IAAI,CAACE,QAAQ;QAClBC,WAAW,EAAEH,IAAI,CAACI,WAAW;QAC7BC,IAAI,EAAEL,IAAI,CAACM,IAAI;QACfC,KAAK,EAAEP,IAAI,CAACQ,KAAK;QACjBC,IAAI,EAAET,IAAI,CAACU,IAAI;QACfC,IAAI,EAAEX,IAAI,CAACY,IAAI;QACfC,QAAQ,EAAEb,IAAI,CAACc,aAAa,KAAKd,IAAI,CAACe,UAAU,GAAGf,IAAI,CAACe,UAAU,CAACC,IAAI,GAAG,SAAS;MACrF,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,OAAOtB,KAAK,EAAE;MACdI,OAAO,CAACJ,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7C,MAAMA,KAAK;IACb;EACF;EAEA,aAAauB,UAAUA,CAACC,UAAkB,EAAEC,QAAiB,EAAuB;IAClF,IAAI;MACF,IAAIC,KAAK,GAAG9B,QAAQ,CACjBK,IAAI,CAAC,MAAM,CAAC,CACZC,MAAM,CAAC;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,CAAC;;MAEJ;MACA,IAAIsB,UAAU,EAAE;QACdE,KAAK,GAAGA,KAAK,CAACC,EAAE,CAAC,mBAAmBH,UAAU,wBAAwBA,UAAU,0BAA0BA,UAAU,GAAG,CAAC;MAC1H;;MAEA;MACA,IAAIC,QAAQ,EAAE;QACZC,KAAK,GAAGA,KAAK,CAACE,EAAE,CAAC,eAAe,EAAEH,QAAQ,CAAC;MAC7C;MAEAC,KAAK,GAAGA,KAAK,CAACvB,KAAK,CAAC,UAAU,CAAC;MAE/B,MAAM;QAAEJ,IAAI;QAAEC;MAAM,CAAC,GAAG,MAAM0B,KAAK;MAEnC,IAAI1B,KAAK,EAAE;QACTI,OAAO,CAACJ,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7C,MAAMA,KAAK;MACb;;MAEA;MACA,OAAOD,IAAI,CAACM,GAAG,CAAEC,IAAS,KAAM;QAC9BC,GAAG,EAAED,IAAI,CAACE,QAAQ;QAClBC,WAAW,EAAEH,IAAI,CAACI,WAAW;QAC7BC,IAAI,EAAEL,IAAI,CAACM,IAAI;QACfC,KAAK,EAAEP,IAAI,CAACQ,KAAK;QACjBC,IAAI,EAAET,IAAI,CAACU,IAAI;QACfC,IAAI,EAAEX,IAAI,CAACY,IAAI;QACfC,QAAQ,EAAEb,IAAI,CAACc,aAAa,KAAKd,IAAI,CAACe,UAAU,GAAGf,IAAI,CAACe,UAAU,CAACC,IAAI,GAAG,SAAS;MACrF,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,OAAOtB,KAAK,EAAE;MACdI,OAAO,CAACJ,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9C,MAAMA,KAAK;IACb;EACF;EAEA,aAAa6B,aAAaA,CAAA,EAAsB;IAC9C,IAAI;MACF,MAAM;QAAE9B,IAAI;QAAEC;MAAM,CAAC,GAAG,MAAMJ,QAAQ,CACnCK,IAAI,CAAC,YAAY,CAAC,CAClBC,MAAM,CAAC,MAAM,CAAC,CACdC,KAAK,CAAC,MAAM,CAAC;MAEhB,IAAIH,KAAK,EAAE;QACTI,OAAO,CAACJ,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;QAClD,MAAMA,KAAK;MACb;MAEA,OAAOD,IAAI,CAACM,GAAG,CAACoB,QAAQ,IAAIA,QAAQ,CAACH,IAAI,CAAC;IAC5C,CAAC,CAAC,OAAOtB,KAAK,EAAE;MACdI,OAAO,CAACJ,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnD,MAAMA,KAAK;IACb;EACF;EAEA,aAAa8B,wBAAwBA,CAAA,EAAqC;IACxE,IAAI;MACF,MAAM;QAAE/B,IAAI;QAAEC;MAAM,CAAC,GAAG,MAAMJ,QAAQ,CACnCK,IAAI,CAAC,YAAY,CAAC,CAClBC,MAAM,CAAC,GAAG,CAAC,CACXC,KAAK,CAAC,MAAM,CAAC;MAEhB,IAAIH,KAAK,EAAE;QACTI,OAAO,CAACJ,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;QAC/D,MAAMA,KAAK;MACb;MAEA,OAAOD,IAAI;IACb,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdI,OAAO,CAACJ,KAAK,CAAC,0CAA0C,EAAEA,KAAK,CAAC;MAChE,MAAMA,KAAK;IACb;EACF;EAEA,aAAa+B,MAAMA,CAACC,GAA+D,EAAqB;IACtG,IAAI;MACF,MAAM;QAAEjC,IAAI;QAAEC;MAAM,CAAC,GAAG,MAAMJ,QAAQ,CACnCK,IAAI,CAAC,MAAM,CAAC,CACZgC,MAAM,CAAC,CAACD,GAAG,CAAC,CAAC,CACb9B,MAAM,CAAC;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,CAAC,CACDgC,MAAM,CAAC,CAAC;MAEX,IAAIlC,KAAK,EAAE;QACTI,OAAO,CAACJ,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;QACzC,MAAMA,KAAK;MACb;MAEA,OAAO;QACLO,GAAG,EAAER,IAAI,CAACS,QAAQ;QAClBC,WAAW,EAAEV,IAAI,CAACW,WAAW;QAC7BC,IAAI,EAAEZ,IAAI,CAACa,IAAI;QACfC,KAAK,EAAEd,IAAI,CAACe,KAAK;QACjBC,IAAI,EAAEhB,IAAI,CAACiB,IAAI;QACfC,IAAI,EAAElB,IAAI,CAACmB,IAAI;QACfC,QAAQ,EAAEpB,IAAI,CAACqB,aAAa,KAAKrB,IAAI,CAACsB,UAAU,GAAGtB,IAAI,CAACsB,UAAU,CAACC,IAAI,GAAG,SAAS;MACrF,CAAC;IACH,CAAC,CAAC,OAAOtB,KAAK,EAAE;MACdI,OAAO,CAACJ,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;MAC1C,MAAMA,KAAK;IACb;EACF;EAEA,aAAamC,WAAWA,CAACV,QAAyE,EAAkC;IAClI,IAAI;MACF,MAAM;QAAE1B,IAAI;QAAEC;MAAM,CAAC,GAAG,MAAMJ,QAAQ,CACnCK,IAAI,CAAC,YAAY,CAAC,CAClBgC,MAAM,CAAC,CAACR,QAAQ,CAAC,CAAC,CAClBvB,MAAM,CAAC,CAAC,CACRgC,MAAM,CAAC,CAAC;MAEX,IAAIlC,KAAK,EAAE;QACTI,OAAO,CAACJ,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9C,MAAMA,KAAK;MACb;MAEA,OAAOD,IAAI;IACb,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdI,OAAO,CAACJ,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,MAAMA,KAAK;IACb;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}